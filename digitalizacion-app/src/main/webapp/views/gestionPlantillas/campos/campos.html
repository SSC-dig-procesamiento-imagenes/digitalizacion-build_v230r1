<html>
	<head>
		<meta charset="utf-8">
	</head>
	<body>
    
        <section class="content-header">
            <h1>Campos</h1>
            <ol class="breadcrumb">
                <li><a><i class="fa fa-book"></i>Campos</a></li>
                <li class="active">Campos</li>
            </ol>
        </section>

        
    <form name="busquedaForm" novalidate>
        <div class="row centerBox">
                <div class="col-xs-6 col-md-6">
                    <div class="box box-danger">
                        <div class="box-header with-border text-center">
                            <h3 class="box-title">Parámetros de búsqueda</h3>
                            
                            <div class="box-tools pull-right">
                                <button id="x" type="button" class="btn btn-box-tool"
                                        data-widget="collapse">
                                    <i class="fa fa-minus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="box-body">
                            <!-- PARAMETROS DE BÚSQUEDA -->
                            <div class="row">
                                <div class="col-md-3"></div>
                                <div class="col-md-6">
                                    <div class="form-group" >
                                        <label for="checkTipoBusqueda"
                                               class="labelCheck noneSelectedUser">Tipo de Búsqueda:</label>
                                        <switcher class="swTeclo pull-right"
                                                  id-check="checkTipoBusqueda" id = "checkTipoBusqueda"
                                                  name = "checkTipoBusqueda"
                                                  true-label="Avanzada"
                                                  true-value="true"
                                                  false-label="Todos"
                                                  false-value="false"
                                                  ng-change="swBusqueda(newValue, oldValue)"
                                                  ng-model="showParametros">
                                        </switcher>
                                    </div>
                                </div>
                                <div class="col-md-3"></div>
                            
                            </div>
                            <div class="row" ng-if="showParametros">


                                    <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="radar">Tipo Busqueda:</label>
                                                <div class="input-group">
                                                    <div class="input-group-addon">
                                                        <i class="fa fa-flask"></i>
                                                    </div>
                                                    <select class="form-control select2" name="comboTipoBusqueda" id="comboTipoBusqueda" ng-required="false"
                                                            ng-change="onchange(parametroBusqueda.tipoBusqueda,parametroBusqueda.valor)"
                                                            ng-options="x.cdTipo as x.nbTipo for x in listTipoBusqueda.tipoBusqueda" 
                                                            ng-model="parametroBusqueda.tipoBusqueda">
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                    <div ng-if="parametroBusqueda.tipoBusqueda!='ESTATUS' " class="col-md-6" align="left">
                                            <div class="form-group"
                                                ng-class="{ 'has-error' : busquedaForm.valor.$invalid && !busquedaForm.valor.$pristine }">
                                                <div align="left">
                                                    <label for="valor">*Valor:</label>
                                                </div>
                                                <div class="input-group">
                                                    <span class="input-group-addon"> <i
                                                        class="fa fa-shield"></i>
                                                    </span> <input ng-disabled ="parametroBusqueda.tipoBusqueda==null || parametroBusqueda.tipoBusqueda==undefined" maxlength="10" type="text" maxlength="10"
                                                        ng-model="parametroBusqueda.valor" name="valor" id="valor"
                                                        class="form-control" ng-required="parametroBusqueda.tipoBusqueda!=null || parametroBusqueda.tipoBusqueda!=undefined">
                                                        
                                                </div>
                                                <p
                                                    ng-show="busquedaForm.valor.$invalid && !busquedaForm.valor.$pristine"
                                                    class="help-block">El valor es requerido</p>
                                            </div>
                                        </div> 

                                        <div class="col-md-6" ng-if="parametroBusqueda.tipoBusqueda=='ESTATUS' ">
                                                <div class="form-group">
                                                    <label for="radar">*Valor:</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                          <i class="fa fa-shield"></i>
                                                        </div>
                                                        <select class="form-control select2" name="comboTipoBusqueda" id="comboTipoBusqueda" ng-required="false"
                                                                ng-options="y.cdTipo as y.nbTipo for y in listTipoBusqueda.tipoEstatus" ng-model="parametroBusqueda.valor">
                                                            <option value="">Todos</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                        
                             </div>

                        
                            
                            
                           
                            <div class="row">
                                <div class="col-md-12">
                                  <div  class="col-md-4" align="right">
                                </div>  
                                <div  class="col-md-4" align="center">
                                    <button type="button" class="btn btn-danger" ng-click="buscarCampos(parametroBusqueda.tipoBusqueda,parametroBusqueda.valor,busquedaForm)" tooltip="Buscar Caracteres">
                                        Buscar
                                    </button>
                                </div>  
                                <div  class="col-md-4" align="right">
                                    <button type="button" class="btn btn-primary" ng-click="modalConfig('N')" tooltip="Nuevo Caracter" tooltip-placement="left" data-original-title="" title="">
                                            <span class="fa fa-plus" aria-hidden="true"></span>
                                     </button>
                                </div>
                                </div>
                            </div>
                            </div>
                         
                        </div>
                    </div>
                </div>
            </div>         
        </form>

        
        <section class="content" >
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-danger">
                            <div class="box-body">
                                <div class="row centerBox">
                                    <div class="col-md-12">
                                        <div class="col-md-12">
                                            <div>
                                                <div class="box-header col-md-12">
                                                    <div class="col-md-4 col-xs-12">
                                                        <h3 class="box-title">
                                                            Registros Encontrados: <span>{{ (listCampo | filter:general.filter).length }}</span>
                                                        </h3>
                                                    </div>
                                                    <div class="col-md-7 form-group">
                                                        <div class="row">
                                                            <div class="col-md-offset-4 col-md-8 col-xs-8">
                                                                <div class="input-group">
                                                                    <input id="searchsomething" type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="Buscar por filtro" ng-model="general.filter"> <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                 
                                                    <div ng-show="listCampo.length > 0" class="col-md-1" align="right">
                                                            <a
                                                                ng-click="downloadReporte()">
                                                                <span class="pull-right "><img
                                                                    src="static/dist/img/excel.png"></span>
                                                            </a>
                                                </div>
                                                </div>
                                                <div class="box-body table-responsive no-padding">
                                                    <table id="myTable" class="table table-hover header-fixed">
                                                        <thead>
                                                            <tr>
                                                                <th class="wrap-text" sort order="'caracter'" by="order" reverse="reverse">CAMPO</th>
                                                                <th class="wrap-text" sort order="'respuesta'" by="order" reverse="reverse">RESPUESTAS</th>--> 
                                                                <th class="wrap-text" sort order="'orientacion'" by="order" reverse="reverse">RESPUESTAS</th>
                                                                <th class="wrap-text" sort order="'stActivo'" by="order" reverse="reverse">ESTATUS</th>
                                                                <th class="wrap-text">EDITAR</th>
                                                                
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr dir-paginate="x in listCampo | filter:general.filter | orderBy:order:reverse | itemsPerPage: view.rowsPerPage ">
                                                                <td class="center"><span>{{x.nombre}}</span></td>
                                                              <!-- <td class="center"><span>{{caracterVO.txObservacion}}</span></td>--> 
                                                                <td class="center"><span>{{x.orientacionesId.nombre}}</span></td>
                                                                <td class="center"><span>{{x.respuestas}}</span></td>
                                                                <td class="center">
                                                                    <div class="form-group">
                                                                        <label for="checkTest3" class="labelCheck noneSelectedUser">
                                                                            {{x.stActivo == 1 ? 'Activo': 'Inactivo'}}
                                                                        </label>
                                                                        <div class="">
                                                                            <switcher class="swTeclo" id-check="checkTest3" ng-model="x.stActivo" ng-change="changeStatus(newValue, oldValue, x)" true-label="<i class='fa fa-check-circle'></i>" true-value="1" false-label="<i class='fa fa-times-circle'></i>" false-value="0">
                                                                            </switcher>
                                                                        </div>
                                                                    </div>
                                                                </td>

                                                                <td class="center"><a ng-click="modalSaveOrUpdate('U',x)"><i class="fa fa-pencil fa-lg"></i> </a></td>
                                        
                                                            </tr>
                                                            <tr ng-if="(listCampo | filter:general.filter).length < 1">
                                                                <td colspan="5" class="text-center">
                                                                    <h4>No se encontraron coincidencias</h4>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="container-fluid">
                                                    <div class="fixed-table-pagination" style="display: block;">
                                                        <rows-per-page rows="view.rowsPerPage" filtro="general.filter" array="listCampo"></rows-per-page>
                                                        <div class="pull-right pagination">
                                                            <dir-pagination-controls class="pagination"></dir-pagination-controls>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
              <!--Termina tabla de busqueda-->     
                <form name="camposForm" novalidate>
                                        <modal visible="showModalConfig" size-modal="md" noescape modalstatic on-shown="funcionAbrir()" 
                                        on-hide="funcionCerrar()">
                                            <modal-header title="{{txtModal}}"></modal-header>
                                            <modal-body>
                            <div class="col-md-12" align="left">
                                      <div class="row">   
                                                    <div class="col-md-6">
                                                    <div class="form-group"
                                                        ng-class="{ 'has-error' : camposForm.nombre.$invalid && !campoForm.nombre.$pristine }">
                                                        <div align="left">
                                                            <label for="nombre">*Nombre:</label>
                                                        </div>
                                                        <div class="input-group">
                                                            <span class="input-group-addon"> <i
                                                                class="fa fa-shield"></i>
                                                            </span> <input maxlength="50" type="text" 
                                                                ng-model="campoVO.caracter" name="nombre" id="nombre"
                                                                class="form-control" required>
                                                        </div>
                                                        <p
                                                            ng-show="camposForm.nombre.$invalid && !camposForm.nombre.$pristine"
                                                            class="help-block">El nombre es requerido</p>
                                                    </div>
                                                     </div>

                                                     
                                        <div class="form-group"  
                                        ng-class="{ 'has-error' : camposForm.orientacion.$error.required && camposForm.orientacion.$dirty }">
                                        <label for="radar">Orientacion:</label>
                                        <div class="input-group">
                                            <div class="input-group-addon">
                                                <i class="fa fa-flask"></i>
                                            </div>
                                            <select class="form-control select2" select2 name="orientacion" id="orientacion" ng-required="true"
                                                
                                                    ng-options="x as x.nbOri for x in listOrientacion" 
                                                    ng-model="dataCrudStep.stepThree.camposVO.orientacion">
                                                    <option value="">{{'APP.Base.mensaje.seleccioneOpcion' | translate}}</option>

                                            </select>
                                        </div>
                                        <p
                                        ng-show="camposForm.orientacion.$error.required && camposForm.orientacion.$dirty"
                                        class="help-block">La orientacion es requerido</p>
                                    </div>

                                      
                                </div> 
                                   
         <div class="row">   
                                 
                <!--INPUT DE OBSERVACIONES-->
					<div class="col-md-12" align="left">
						<div class="form-group">
							<div align="left">
								<label for="obs"> Observaciones:</label>
							</div>
							<div class="input-group">
								<span class="input-group-addon"> <i class="fa fa-user"></i>
								</span>
								<textarea rows="2" type="text" maxlength="100" ng-model="plantillaVO.txObservacion"
									name="observaciones" id="observaciones" capitalize class="form-control"> </textarea>
								<br>
							</div>
						</div>
					</div>
					<!--CIERRA INPUT DE OBSERVACIONES-->

                                    </div>





                                    <div class="row">	
                                        <!--Inicia dual list de configuracion de Campos--->      
                                        <div class="centerRowList">
                                           <div ng-if="list.items != null" class="col-md-5 dvMain"
                                               ng-repeat="list in myList  track by $index"
                                               ng-class="{'orderFirst':$index == 0,'orderLast':$index == 1}">
                                               <fieldset class="scheduler-border">
                                               
                                                <fieldset class="scheduler-border"  ng-class="{'listRequired' : (list.items.length == 0 && list.codList=='listDer' && list.isDirty)}"> 
                                   
                                                   <legend class="scheduler-border">
                                                       <span>
                                                        <span ng-class="{'txtRequired' : (list.items.length == 0 && list.codList=='listDer' && list.isDirty)}">
                                   
                                                           <span>
                                                               {{list.listName}}
                                                               <span class="badge-dndList">{{list.items.length}}</span>
                                                           </span>
                                                           <span>
                                                               <span>
                                                                   {{(filtered.length !== list.items.length || item.label.length > 0 ? ('('+filtered.length +
                                                                   (filtered.length !== 1 ? ' registros filtrados' : ' registro filtrado') + ')') : '')}}
                                                               </span>
                                                           </span>
                                                       </span>
                                                       <div class="input-group">
                                                           <span class="input-group-addon">
                                                               <i class="fa fa-search"></i>
                                                           </span>
                                                           <input type="text" class="form-control"
                                                               ng-model="list.label" placeholder="Filtrar por..." />
                                                       </div>
                                                   </legend>
                                                   <div class="panel-body multiSelectItem scrollable-content"
                                                       style="max-height:25vh;">
                                                       <ul dnd-list dnd-drop="onDrop(list, item, index,'nbItem')">
                                                           <li class="liRepeat ngIfAnimate"
                                                               ng-repeat="item in list.items  | filter: list.label as filtered"
                                                               dnd-draggable="getSelectedItemsIncluding(list, item)"
                                                               dnd-dragstart="onDragstart(list, event)"
                                                               dnd-moved="onMoved(list,'nbItem')"
                                                               dnd-dragend="list.dragging = false"
                                                               dnd-selected="item.selected = !item.selected"
                                                               ng-class="{'selected': item.selected}"
                                                               ng-hide="list.dragging && item.selected">
                                   
                                                            <p>
                                                                <span tooltip="{{ item.caracteres }}" class="center" tooltip-placement="right"
                                                                style="cursor: pointer;">
                                                                 <strong> {{item.nombre}}</strong> 
                                                               </span>  
                                                            </p>
                                                           </li>
                                                           <li ng-if="filtered == 0 && list.items.length !== 0"
                                                               class="text-center ngOnlyEnter">
                                                               No se encontraron coincidencias
                                                           </li>
                                   
                                                           
                                                        <li ng-if="(list.items.length == 0 && list.codList=='listDer' && list.isDirty)" class="text-center listRequired txtRequired ngIfAnimate">
                                                         La lista {{list.listName}} no puede estar vacia
                                                           </li> 
                                   
                                   
                                                           <li ng-if="(list.items.length == 0 && list.codList=='listDer' && list[1].isDirty)"
                                                               class="text-center ngOnlyEnter">
                                                               Arrastre elementos a la lista
                                                           </li>
                                   
                                                           <li ng-if="(list.items.length == 0 && list.codList=='listIzq') || (list.items.length == 0 && list.codList=='listDer' && !list.isDirty)"
                                                               class="text-center ngOnlyEnter">
                                                               Arrastre elementos a la lista
                                                           </li>
                                   
                                                       </ul>
                                                   </div>
                                               </fieldset>
                                           </div>
                                           <div class="col-md-1 col-lg-1 orderMiddle middleButtons">
                                   
                                               <div>
                                                   <button class="btn btn-md btn-danger" tooltip="Restablecer"
                                                       tooltip-placement="top" ng-click="reiniciarListaCaracteres()">
                                                       <i class="fa fa-refresh"></i>
                                                   </button>
                                               </div>
                                           </div>
                                       </div>
                                            <!--Termina dual list de configuracion de campos--->  
                                 </div>         
                        </div>
                          
                             
                                               
                                            </modal-body>
                                            <modal-footer btn-close="Cancelar">
                                                <button class="btn btn-danger" ng-click="saveOrUpdate(caracterForm,caracterVO)">
                                                    Guardar
                                                </button>
                                            </modal-footer>
                                        </modal>
                                    </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </section>

	</body>
</html>